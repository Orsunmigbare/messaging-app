(window["webpackJsonpmessaging-app-client"]=window["webpackJsonpmessaging-app-client"]||[]).push([[0],{38:function(e,t,a){e.exports=a(72)},43:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(16),r=a.n(i),c=(a(43),a(14)),l=a(17),o=a.n(l),m=a(6),u=a(7),d=a(9),g=a(8),p=a(10),h=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"sidebar"},s.a.createElement("header",null,s.a.createElement("a",{href:"#"},"My App")),s.a.createElement("ul",{class:"nav"},s.a.createElement("li",{class:"nav-item w-100"},s.a.createElement(c.b,{to:"/",class:"nav-link"},s.a.createElement("i",{class:"zmdi zmdi-mail-send"})," Send Message")),s.a.createElement("li",{class:"nav-item w-100"},s.a.createElement(c.b,{to:"/view",class:"nav-link"},s.a.createElement("i",{class:"zmdi zmdi-eye"})," View Messages Sent"))))}}]),t}(n.Component),f=a(20),v=a.n(f),E=function(e,t){var a=e.URL;return new Promise(function(e,n){v.a.get("".concat("/api/").concat(a).concat(t?"/".concat(t):""),{headers:{"Content-Type":"application/json"}}).then(function(t){e(t.data)}).catch(function(e){"Request failed with status code 403"===e.message&&(console.log(e),n(e))})})},b=function(e){var t=e.URL,a=e.parameters;return new Promise(function(e,n){v.a.post("".concat("/api/").concat(t),a,{headers:{"Content-Type":"application/json"}}).then(function(t){e(t.data)}).catch(function(e){console.log(e),n(e)})})},_=function e(){Object(m.a)(this,e)};_.create_user=function(e){return b({URL:"create_user",parameters:e})},_.send_message=function(e){return b({URL:"send_message",parameters:e})},_.edit_message=function(e){return b({URL:"edit_message",parameters:e})},_.get_messages=function(){return E({URL:"get_messages"})},_.delete_message=function(e){return E({URL:"delete_message"},e)};var w=_,y=a(21),j=a.n(y),O=a(34),C=s.a.createContext({}),S=(C.Consumer,function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={message:"",title:"",id:""},a.update_mesage=function(){var e=Object(O.a)(j.a.mark(function e(t,n,s){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({message:t,title:n,id:s});case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={update_message:this.update_mesage,message:this.state};return s.a.createElement(C.Provider,{value:e},this.props.children)}}]),t}(n.Component)),x=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={title:"",message:"",id:"",context:"send",loading:!1,response_message:""},a.send_message=function(){var e=a.state.context;a.setState({loading:"true"});var t=a.state,n=t.title,s=t.message,i=t.id;(n||s)&&("send"===e?w.send_message({title:n,message:s}).then(function(e){a.setState({loading:!1,response_message:e.message})}).catch(function(e){a.setState({loading:!1,response_message:e.message})}):w.edit_message({message:s,message_id:i,title:n}).then(function(e){a.setState({loading:!1,response_message:e.message})}).catch(function(e){a.setState({loading:!1,response_message:e.message})}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.context.message;e.id&&this.setState({title:e.title,message:e.message,context:"update",id:e.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.message,n=(t.id,t.title),i=t.context,r=t.response_message;return s.a.createElement("div",{id:"content"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement("h1",null,"Compose Message"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"msg_title"},"Title"),s.a.createElement("input",{value:n||"",type:"text",onChange:function(t){e.setState({title:t.target.value})},className:"form-control",id:"msg_title","aria-describedby":"emailHelp",placeholder:"Enter message title"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"msg_content"},"Write message"),s.a.createElement("textarea",{value:a||"",className:"form-control",onChange:function(t){e.setState({message:t.target.value})},id:"msg_content",rows:3,defaultValue:""})),s.a.createElement("p",null,r),s.a.createElement("button",{onClick:this.send_message,className:"btn btn-primary"},"update"===i?"Update":"Send"),"update"===i?s.a.createElement("button",{onClick:function(){window.location.reload()},style:{marginLeft:20},className:"btn btn-primary"},"Compose new New"):null))}}]),t}(n.Component);x.contextType=C;var k=x,N=a(74),R=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(N.a,{in:this.props.in,timeout:300,classNames:this.props.transClass,unmountOnExit:!0},this.props.child)}}]),t}(n.Component),z=a(12),L=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={messages:[],loading:!1,response_message:""},a.delete_message=function(e){var t=a.state.messages;a.setState({loading:"true"}),w.delete_message(e).then(function(n){var s=t.findIndex(function(t){return t._id===e});t.splice(s),a.setState({messages:t,response_message:n.message})}).catch(function(e){a.setState({loading:!1,response_message:e.message})})},a.edit_message=function(e){a.context.update_message(e.message,e.title,e._id),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;(0,window.$)('[data-toggle="tooltip"]').tooltip(),this.setState({loading:"true"}),w.get_messages().then(function(t){e.setState({loading:!1,response_message:t.message}),e.setState({messages:t.data})}).catch(function(t){e.setState({loading:!1,response_message:t.message})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.messages;t.loading;return s.a.createElement("div",{id:"content"},s.a.createElement("div",{class:"container-fluid"},s.a.createElement("h1",null,"View Sent Message"),a.length?s.a.createElement("ul",{class:"messages"},a.map(function(t){return s.a.createElement("li",null,s.a.createElement("div",{class:"message"},s.a.createElement("div",{class:"cancel-delete-btn",d:!0},s.a.createElement("i",{onClick:function(){e.edit_message(t)},class:"zmdi zmdi-edit white-tooltip","data-toggle":"tooltip","data-placement":"top",title:"Edit message"}),"|",s.a.createElement("i",{class:"zmdi zmdi-delete white-tooltip","data-toggle":"tooltip","data-placement":"top",title:"Delete message",onClick:function(){e.delete_message(t._id)}})),s.a.createElement("h3",null," ",t.title),s.a.createElement("p",null," ",t.message)))})," "):s.a.createElement("p",null,"No messages to display")))}}]),t}(n.Component);L.contextType=C;var U=Object(z.withRouter)(L);var M=function(){return s.a.createElement("div",{id:"viewport"},s.a.createElement(c.a,null,s.a.createElement(h,null),s.a.createElement(o.a,{path:"/",exact:!0},function(e){var t=e.match;return s.a.createElement(R,{in:null!=t,transClass:"page",child:s.a.createElement(k,null)})}),s.a.createElement(o.a,{path:"/edit/:id",exact:!0},function(e){var t=e.match;return s.a.createElement(R,{in:null!=t,transClass:"page",child:s.a.createElement(k,{id:t?t.params.id:null})})}),s.a.createElement(o.a,{path:"/view",exact:!0},function(e){var t=e.match;return s.a.createElement(R,{in:null!=t,transClass:"page",child:s.a.createElement(U,null)})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(S,null,s.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.01bd3911.chunk.js.map